

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>1.5</title>
    <link href="index.css" rel="stylesheet" />
</head>
<body style="background-color:black;">



    <div>
        <img id="img_bg" src="http://7xssod.com1.z0.glb.clouddn.com/t_b1.png" />
        <img id="ddd"  />
    </div>


    <input type="file" value="选择文件" id="sel_file" onchange="preImg(this.id,'ddd');" style="z-index:9999;position:absolute;bottom:20px;left:20px;" />

    <script src="https://cdn.bootcss.com/zepto/1.0rc1/zepto.min.js"></script>
    <script src="https://cdn.bootcss.com/touchjs/0.2.14/touch.min.js"></script>
    <script src="cat.js"></script>
    <script>
        function getFileUrl(sourceId) {
            var url;
            if (navigator.userAgent.indexOf("MSIE") >= 1) { // IE  
                url = document.getElementById(sourceId).value;
            } else if (navigator.userAgent.indexOf("Firefox") > 0) { // Firefox  
                url = window.URL.createObjectURL(document.getElementById(sourceId).files.item(0));
            } else if (navigator.userAgent.indexOf("Chrome") > 0) { // Chrome  
                url = window.URL.createObjectURL(document.getElementById(sourceId).files.item(0));
            }
            return url;
        }
        function preImg(sourceId, targetId) {
            var url = getFileUrl(sourceId);
            var imgPre = document.getElementById(targetId);
            imgPre.src = url;
        }

        var $targetObj = $('#ddd');  
        //初始化设置  
        cat.touchjs.init($targetObj, function (left, top, scale, rotate) {});  
        //初始化拖动手势（不需要就注释掉）  
        cat.touchjs.drag($targetObj, function (left, top) { });  
        //初始化缩放手势（不需要就注释掉）  
        cat.touchjs.scale($targetObj, function (scale) { });  
        //初始化旋转手势（不需要就注释掉）  
        cat.touchjs.rotate($targetObj, function (rotate) { });  


        //var dx = 0;
        //var dy = 0;
        //touch.on('#ddd', 'touchstart', function (ev) {

        //    //var reg = /(rotate\([\-\+]?((\d+)(deg))\))/i;
        //    //var wt = $("#ddd").css('-webkit-transform')
        //    //var wts = wt.match(reg);
        //    //var $2 = RegExp.$2;
        //    //$("#ddd").css('-webkit-transform', (wt.replace($2, parseFloat(RegExp.$3) + 10 + RegExp.$4)));
           

        //    ev.preventDefault();
        //});

        ////放大
        //touch.on("#ddd", "pinchout", function (ev) {
        //    var oldwidth = parseFloat($("#ddd").css("width").replace('px', ''));
        //    $("#ddd").css("width", (oldwidth + 2) + "px");
        //});

        ////缩小
        //touch.on("#ddd", "pinchin", function (ev) {
        //    var oldwidth = parseFloat($("#ddd").css("width").replace('px', ''));
        //    $("#ddd").css("width", (oldwidth -2) + "px");
        //});

        //touch.on('#ddd', "drag", function (ev) {

        //    var localX = dx + ev.x;
        //    var localY = dy + ev.y;

        //    if (localX > 0 && localX < window.innerWidth &&
        //    localY > 0 && localY < window.innerHeight) {
        //        this.style.webkitTransform = 'translate3d(' + localX + "px," + localY + "px,0)";
        //    }
        //});

        //touch.on('#ddd', "dragend", function (ev) {
        //    dx += ev.x;
        //    dy += ev.y;
        //});
    </script>
</body>
</html>
